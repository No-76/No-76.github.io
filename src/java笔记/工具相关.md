---
tittle: 工具相关
icon: pen-to-square
date: 2024-10-8
category:
  - Java
timeline: true
tag:
  - Java
  - Mybatis
  - Maven
  - Redis
---
# 工具相关
记录写Spring使用过程中常用的一些工具。
<!-- more --> 
## Mybatis及Plus
笔记未完成状态。
<!-- more -->
### Mybatis
#### 参数占位符  
- ```#{...} ```
  - 执行SQL时，会将#{...}替换为？，生成预编译SQL，会自动设置参数。
  - 使用时机：参数传递时，都使用#{...}。
- ```${...}```
  - 拼接SQL,直接将参数拼接到SQL语句中，存在SQL注入问题。登录密码千万不要这样设置。
  - 使用时机，如果对表明，列表名进行动态设置时。
#### XML映射标签  
- ```<if>```
- ```<where>```
- ```<set>```
- ```<foreach>```
- ```<sql> ```
- ```<include>```
- ```<association>```: 关联对象,处理多对一的关联。
- ```<collection>```：关联集合，处理一对多的关联。
- ```<resultMap>```：将结果映射到实体类中。resultMap可以配合标签association或collection来实现级联查询。这两个标签内除了常见属性property、column之外，还可以设置其他属性，如javaType来指定实体类中参数类型(可以为对象类型)、select语句，实现多表查询。
### Mybatis-Plus 
  
## Maven  
Maven 是一个项目管理和构建自动化工具,它使用一个名为 POM（Project Object Model）的 XML 文件来描述项目的构建过程、依赖关系和其他配置。
- 继承与聚合？
- 聚合工程？  
标签```<modules> ```
- 版本锁定？  
标签```<Dependencymanage>```  

## Redis  
是一个开源的键值存储系统，通常用作数据库、缓存和消息代理。  
- 字符串(String)
  - set key value：设置指定key的值
  - get key：获取指定key的值
  - setex key seconds value：设置指定key的值，并将key的过期时间设为seconds秒
  - setnx key value 只有在key不存在时设置key的值
- 哈希(Hash)
  - HSET key field value：将哈希表 key 中的字段 field 的值设为 value
  - HGET key field：获取存储在哈希表中指定字段的值。
  - hdel key field:删除哈希表中指定字段
  - hkeys key：获取哈希表中所有字段
  - hvals key：获取哈希表中所有值 
- 列表(List)
  - l(r)push key value:将一个或者多个插入到列表头部(尾部)
  - l(r)pop key value:移除一个或者多个列表头部(尾部)元素
  - llen key：获取列表长度
- 集合(Set)
  - sadd key member:向集合中加入一个或多个成员
  - srem key member:删除集合中的一个或多个成员
  - sinter key1 [key2]:求交集
  - sunion key1 [key2]:求并集
- 有序集合(Sorted Set)
  - zadd key socre member:向有序集合中添加一个或多个成员
  - zrem key member:移除有序集合中一个或多个成员
  - zrange key start stop:通过索引区间返回指定区间的成员
  - zincrby key increment member:对指定成员加上分数增量increment
- 通用命令
  - keys parttern:查找给定模式的key
  - exists key:检查是否存在key
  - type key:返回key所储存的值的类型
  - del key:存在时删除key 
## MySQL
单机吞吐量1000左右。
### 多表联合
处理关联问题：  
- 同步存储：增加新的字段，在班级表中增加新的字段学生数量来进行维护。  
    - 优点：
      查询数量时只需要单表查询，执行速度快  
    - 缺点：
      需要维护额外的字段，维护成本高  
- 关联查询：编写关联查询语句，在mapper层进行封装。
  - 优点：不需要额外的字段进行维护
  - 缺点：查询较慢，当N较大时不适用    

处理级联问题：
 - 级联查询：通常是指对象关系映射(ORM)中，即在查询时，将关联对象也查询出来。在mybatis中，使用association或collection标签来完成。
## Kafka
Kafka 是一个开源的分布式事件日志系统，单机吞吐量10w左右。
- 应用场景
  - 异步处理:将一些比较耗时的操作放在其他系统中
  - 系统解耦:减少不同微服务之间的耦合性
  - 流量削峰:根据消息队列高吞吐特性解决
  - 日志处理(大数据领域)
- 两种模型  
1. 生产者、消费者模型:不必保证消息的顺序，和消息持久化。
2. 消息队列模式:必须保证消息的顺序性，和消息持久化。其中包括点对点，一对一。和发布订阅，一对多两种形式。  



